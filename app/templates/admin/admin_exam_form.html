{% extends 'base.html' %}
{% block title %}{% if exam %}模試の編集{% else %}新しい模試の追加{% endif %}{% endblock %}
{% block content %}
<article>
    <hgroup>
        <h1>{% if exam %}模試の編集{% else %}新しい模試の追加{% endif %}</h1>
        <p>URLを貼り付けて「情報取得」ボタンを押すと、AIが自動で入力欄を埋めます。</p>
    </hgroup>

    <div class="grid">
        <input type="url" id="source-url" placeholder="模試の公式サイトURLをここに貼り付け">
        <button id="fetch-btn" class="secondary" style="width: auto;">AIで情報取得</button>
    </div>
    <hr>
    
    <div id="exam-candidates"></div>

    <form method="post">
        <label for="provider">提供元</label>
        <input type="text" id="provider" name="provider" value="{{ exam.provider if exam else '' }}" required>

        <label for="name">模試名</label>
        <input type="text" id="name" name="name" value="{{ exam.name if exam else '' }}" required>

        <div class="grid">
            <label for="exam_date">実施日</label>
            <label for="app_start_date">申込開始日</label>
            <label for="app_end_date">申込締切日</label>
        </div>
        <div class="grid">
            <input type="date" id="exam_date" name="exam_date" value="{{ exam.exam_date.strftime('%Y-%m-%d') if exam and exam.exam_date else '' }}" required>
            <input type="date" id="app_start_date" name="app_start_date" value="{{ exam.app_start_date.strftime('%Y-%m-%d') if exam and exam.app_start_date else '' }}" required>
            <input type="date" id="app_end_date" name="app_end_date" value="{{ exam.app_end_date.strftime('%Y-%m-%d') if exam and exam.app_end_date else '' }}" required>
        </div>

        <label for="url">公式サイトURL (登録用)</label>
        <input type="url" id="url" name="url" value="{{ exam.url if exam else '' }}" required>

        <button type="submit">{% if exam %}更新する{% else %}追加する{% endif %}</button>
    </form>
</article>


{% endblock %}