{% extends 'base.html' %}
{% block title %}模試情報管理{% endblock %}
{% block content %}
<article>
    <hgroup>
        <h1>模試情報管理</h1>
        <a href="{{ url_for('main.new_exam') }}" role="button">新しい模試を追加</a>
        </hgroup>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages">
          {% for message in messages %}
            <p><strong>{{ message }}</strong></p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <h3 style="margin-top: 2rem;">登録済み模試一覧</h3>
    <table>
        <thead>
            <tr>
                <th>提供元</th><th>模試名</th><th>実施日</th><th>申込締切</th><th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for exam in exams %}
            <tr>
                <td>{{ exam.provider }}</td>
                <td><a href="{{ exam.url }}" target="_blank" rel="noopener noreferrer">{{ exam.name }}</a></td>
                <td>{{ exam.exam_date.strftime('%Y-%m-%d') if exam.exam_date else '' }}</td>
                <td>{{ exam.app_end_date.strftime('%Y-%m-%d') if exam.app_end_date else '' }}</td>
                <td>
                    <div class="grid" style="margin-bottom: 0;">
                        <a href="{{ url_for('main.edit_exam', exam_id=exam.id) }}" role="button" class="secondary" style="margin-bottom: 0;">編集</a>
                        <form action="{{ url_for('main.delete_exam', exam_id=exam.id) }}" method="post" onsubmit="return confirm('本当に削除しますか？');" style="margin: 0;">
                            <button type="submit" class="secondary outline" style="margin-bottom: 0;">削除</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</article>
{% endblock %}